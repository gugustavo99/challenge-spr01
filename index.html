<!DOCTYPE html>
<html lang="pt-br">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Decodificador</title>
	<link rel="stylesheet" type="text/css" href="reset.css">
	<link rel="stylesheet" type="text/css" href="style.css">

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body>
	<header>
		<h1><img src="img/logo.png" alt="Logo Alura" class="logo"></h1>
	</header>
	<main>
		<div class="cripto">
			<textarea cols="10" rows="10" placeholder="digite seu texto" id="criptografia"></textarea>
			<h4><span>!</span> Apenas letras minúsculas e sem acento.</h4>
			<div class="botoes">
				<button id="bt-criptografar">Criptografar</button>
				<button id="bt-descriptografar">Descriptografar</button>
			</div>
		</div>

		<div class="retangulo">
			<div class="cripto-on">
				<textarea cols="10" rows="10" id="resultado" placeholder="Nenhuma mensagem"></textarea>
				<button id="bt-copiar">Copiar</button>
			</div>
			<div class="cripto-off">
				<img src="img/desenho.png" alt="Desenho" id="figura">
				<div class="aviso">
					<h2>Nenhuma mensagem encontrada</h2>
					<h3>Digite um texto que você deseja criptografar ou descriptografar.</h3>	
				</div>
			</div>
		</div>
	</main>
	<footer>
		<p>&#169 by Gustavo_Azevedo</p>
	</footer>

	<script type="text/javascript">

		const btCriptografar = document.getElementById("bt-criptografar");
		btCriptografar.onclick = criptografar;

		const btDescriptografar = document.getElementById("bt-descriptografar");
		btDescriptografar.onclick = descriptografar;

		const btCopiar = document.getElementById("bt-copiar")
		btCopiar.onclick = copiar;

		resultadoOnOff();

		function resultadoOnOff() {
			let resultado = document.getElementById("criptografia");
			if(resultado.value == '') {
				document.querySelector(".cripto-on").style.display = "none";
				document.querySelector(".cripto-off").style.display = "block";
			} else {
				document.querySelector(".cripto-off").style.display = "none";
				document.querySelector(".cripto-on").style.display = "block";
			}
		}

		function criptografar() {
			let codigo = document.getElementById("criptografia");
			if (codigo.value != '') {
				codigo = codigo.value.replace(/e/g, 'enter'); 
				codigo = codigo.replace(/i/g, 'imes');
				codigo = codigo.replace(/a/g, 'ai');
				codigo = codigo.replace(/o/g, 'ober');
				codigo = codigo.replace(/u/g, 'ufat');
				document.querySelector("#resultado").value = codigo;
				resultadoOnOff();
				document.querySelector("#criptografia").value = ''
			}
		}

		function descriptografar() {
			let codigo = document.getElementById("criptografia");
			if (codigo.value != '') {
				codigo = codigo.value.replace(/enter/g, 'e'); 
				codigo = codigo.replace(/imes/g, 'i');
				codigo = codigo.replace(/ai/g, 'a');
				codigo = codigo.replace(/ober/g, 'o');
				codigo = codigo.replace(/ufat/g, 'u');
				document.querySelector("#resultado").value = codigo;
				resultadoOnOff();
				document.querySelector("#criptografia").value = ''
			}
		}

		function copiar() {
			let copiar = document.getElementById("resultado");
	        copiar.select();
	        copiar.setSelectionRange(0, 99999)
	        document.execCommand("copy");
	        document.querySelector("#resultado").value = ''
			resultadoOnOff();
		}

	</script>
</body>
</html>